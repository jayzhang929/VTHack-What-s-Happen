<!doctype html>
<html>
  <head>
    <title>Events Social</title>
    <link rel="stylesheet" type="text/css" href="bootstrap.css">
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    
  </head>
  <body>
  	<h1 style="text-align: center;">Events Social</h1>

    <form method="get" action="/form">
      Sponsor Name: <input type="text" name="username"> <br />
      Event Name: <input type="text" name="eventname"> <br />
      Location: <input type="text" name="location"> <br />
      
      Month:
      <select name="month">
        <option value="January">Jan</option>
        <option value="February">Feb</option>
        <option value="March">Mar</option>
        <option value="April">Apr</option>
      </select>

      Date: 
      <select name="date">
        <option value="14">14</option>
        <option value="15">15</option>
        <option value="16">16</option>
      </select>

      Time: <input type="text" name="time">
      <br />
      <input type="submit">
    </form>

    <button onclick="myFunction()">click here</button>
    
    <ul id="textUpdate">
      <li>whats news?</li>
    </ul>

    <script src="/socket.io/socket.io.js"></script>
    <script src="http://code.jquery.com/jquery-1.11.1.js"></script>
    
    
    <script>
      var socket = io();

      function myFunction() {
        console.log("myFunction is called");
        socket.emit('newsRequest', "here we go");
      }
	  
	     socket.on('news', function(data){
			    //$('#content').append(data);
          console.log(data.length);
          var length = data.length, index = 0;
          var year, month, date, time;
          while (index < length) {
            var dateFieldBreakDown = data[index].DateField.split(/(\d+)/);
            year = dateFieldBreakDown[1];
            month = dateFieldBreakDown[3];
            date = dateFieldBreakDown[5];
            time = dateFieldBreakDown[7] + dateFieldBreakDown[8] + dateFieldBreakDown[9];
            console.log();
			       $('#textUpdate').append($('<li>').text(data[index].name + " " + data[index].EventName + " " + data[index].Loc + " Month: " + month + " Date: " + date + " Time: " + time) );

            index++;
          }
	     });
	  
	  
    </script>
    
  </body>
</html>
